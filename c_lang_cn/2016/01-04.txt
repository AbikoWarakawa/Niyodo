00:08 xxxxxxxx quit:Ping timeout: 264 seconds
00:11 yzld2002 joined channel
00:13 yzld2002 quit:Remote host closed the connection
00:14 sleepwalking quit:Ping timeout: 276 seconds
01:04 whocares_2 quit:Read error: Connection reset by peer
01:05 whocares_2 joined channel
01:12 dantmnf quit:Quit: ZNC - http://znc.in
01:55 lh_mouse quit:Read error: Connection reset by peer
03:34 Youmu quit:Quit: Connection closed for inactivity
06:20 randomclown joined channel
07:47 sleepwalking joined channel
08:05 cleamoon_ joined channel
08:31 slowcoach quit:Quit: slowcoach
09:18 tutu_wind joined channel
09:18 tutu_wind: morning ~
09:41 hatelis joined channel
09:41 randomclown quit:Quit: Leaving
09:52 whatofor joined channel
10:10 tutu_wind quit:Ping timeout: 276 seconds
10:12 xxxxxxxx joined channel
10:38 tutu joined channel
10:47 whatofor quit:Read error: Connection reset by peer
10:48 tutu quit:Ping timeout: 240 seconds
10:50 whatofor joined channel
10:54 tutu joined channel
11:01 sleepwalking quit:Ping timeout: 276 seconds
11:08 StardustX joined channel
11:13 lh_mouse joined channel
11:14 luxiaoyou joined channel
11:20 tutu: luxiaoyou: hi
11:25 luxiaoyou: hi
11:29 sleepwalking joined channel
11:35 cleamoon_ quit:Ping timeout: 276 seconds
11:35 luxiaoyou1 joined channel
11:37 luxiaoyou quit:Ping timeout: 246 seconds
11:38 sleepwalking quit:Quit: Ex-Chat
11:43 tutu quit:Quit: WeeChat 0.4.3
11:44 xxxxxxxx: http://imgsrc.baidu.com/forum/w%3D580%3B/sign=46917ae50dd162d985ee621421e4a8ec/0d338744ebf81a4c1596d8e8d02a6059252da66e.jpg
11:59 iyzsong: 0 0
12:04 hatelis: iyzsong, = =
12:13 iyzsong: 下午好~
12:16 hatlist: 中午好
12:32 ASenR joined channel
12:43 lh_mouse: geordi, { foo f; cout << TYPE(f.a = 1); } struct foo { int a : 1; };
12:43 geordi: lvalue int
12:51 lh_mouse: geordi, { uint32_t a; foo f; a = (f.b = 0x1234); } struct foo { uint32_t b : 8; }
12:51 geordi: error: expected ';' after struct definition
12:51 lh_mouse: geordi, { uint32_t a; foo f; a = (f.b = 0x1234); } struct foo { uint32_t b : 8; };
12:51 geordi: warning: large integer implicitly truncated to unsigned type
12:51 lh_mouse: geordi, use -w
12:51 geordi: <no output>
12:51 lh_mouse: geordi, -w { uint32_t a; foo f; a = (f.b = 0x1234); cout <<a; } struct foo { uint32_t b : 8; };
12:51 geordi: 52
12:52 lh_mouse: geordi, -w { uint32_t a; foo f; a = (f.b = 0x1234); cout <<a, TYPE(f.b = 0x1234); } struct foo { uint32_t b : 8; };
12:52 geordi: 52, lvalue unsigned int
13:40 ASenR quit:Ping timeout: 265 seconds
14:18 varna joined channel
14:19 varna: hatelis: pull一下servcraft, 修了一点接口
14:27 ASenR joined channel
14:39 hatelis: varna, 为啥加这几个返回值？
14:40 varna: 因为会失败
14:40 varna: 而那个void返回类型的历史比我当提督的时间还长
14:40 varna: 当时就是个鸵鸟
14:51 luxiaoyou joined channel
14:53 luxiaoyou1 quit:Ping timeout: 256 seconds
14:54 luxiaoyou quit:Read error: Connection reset by peer
15:06 xxxxxxxx: varna: 快看这个吹 http://bbs.tiexue.net/post2_6468556_1.html
15:08 varna: 我选择闭上眼撸
15:09 xxxxxxxx: http://news.ifeng.com/mil/detail_2012_10/11/18186884_0.shtml 另一个吹
15:09 hatelis: xxxxxxxx, 如果是真的，某军的反间谍机关全应该开除，全给“西方情报机构”知道了
15:10 xxxxxxxx: 为啥大家这么喜欢沈飞
15:10 varna: 毕竟西方媒体跑得比谁都快
15:10 varna: 因为成飞搞出了秋山澪……
15:11 OO_after quit:Remote host closed the connection
15:12 whatofor_1 joined channel
15:13 xxxxxxxx: 话说新设计的飞机叫不叫歼-xx是什么时候决定的?
15:14 varna: 大概定型了就给个编号吧
15:15 whatofor quit:Ping timeout: 256 seconds
15:15 hatelis: 如果这都是真的，那说明是偷到了哪家的材料技术？
15:16 StardustX: "美国《防务新闻》称，歼-18安装有激光浮动主动相控阵雷达"。。。从没听说过什么“激光浮动主动相控阵雷达”
15:16 varna: 其实看点是垂直起降
15:16 varna: 看来我军机动部队还是瓶颈在弹射上了
15:17 hatelis: 垂直起降又是偷到了谁家的技术？
15:17 varna: 这个不太用偷
15:17 varna: 看飞机的重量来决定引擎出力和主轴强度就好吧
15:18 varna: 别搞成马润版肥电那个样子的话，也许还能起来
15:21 tutu_wind joined channel
15:22 xxxxxxxx: http://mil.sohu.com/20151225/n432568074.shtml 近一点的新闻这么说
15:23 xxxxxxxx: 不过我不知道这个是不是吹
15:24 varna: 看着是
15:33 hatelis: varna, 马润版肥电 是什么鬼
15:38 hatelis: 原来是 米帝咳军撸战队F35啊
15:38 varna: +
15:38 varna: 深海爪黄肥电舰战改
15:40 condy: lh_mouse: http://ideone.com/m3Fj9a   这个算不算是GCC的一个bug？
16:06 ASenR quit:Ping timeout: 246 seconds
16:07 ASenR joined channel
16:19 pocmon joined channel
16:19 pocmon quit:Changing host
16:19 pocmon joined channel
16:35 hoxily quit:Read error: Connection reset by peer
16:35 hoxily joined channel
16:44 ASenR quit:Ping timeout: 250 seconds
17:15 tutu_wind quit:Ping timeout: 264 seconds
17:32 lh_mouse: condy, ?
17:32 condy: 0.0
17:33 condy: 某人发到了 ##C++ 里，不过好像没人鸟的问题
17:34 condy: 为啥在参数转发的时候必须要用 std::declval, 而不是一个 std::forward
17:34 condy: ==
17:34 condy: 我SB了
17:40 lh_mouse: condy, 管它呢。
17:40 lh_mouse: decltype(auto) 大法好。
17:40 condy: O.O
17:40 condy: 是啊（
17:43 lh_mouse: ヲ上次还问过 表达式 std::puts 的 dynamic type 是啥也没人鸟。
17:57 TommyJerryMairo quit:Ping timeout: 255 seconds
17:58 ASenR joined channel
18:00 TommyJerryMairo joined channel
18:12 xxxxxxxx: http://ent.ifeng.com/a/20160103/42555693_0.shtml
18:12 xxxxxxxx: 这小伙药丸
18:14 hatelis quit:Quit: Leaving
18:16 varna: 这PS技术不过关啊
18:18 varna: P身份证的话，最好是手工做一次平铺，然后把要P的字用加深系的叠加烧在平铺层上面
18:18 varna: 必要的话再打一次光或者调曲线
18:19 xxxxxxxx: 据美国有线电视新闻网CNN报道，当地时间2016年1月1日，美国加利福尼亚州举行了第127届玫瑰花车大游行。但在游行过程中，天空中的飞机突然喷出烟雾，并用烟雾写下了“美国很伟大，特朗普真恶心”一句话，令在场的观众瞠目结舌。
18:20 xxxxxxxx: 除此之外，天空中还出现了其他标语，例如“艾奥瓦人抛弃特朗普”、“除了特朗普，谁都行”等。
18:22 varna: 爱荷华州……
18:32 tutu joined channel
18:34 xxxxxxxx: http://news.sohu.com/20160104/n433430322.shtml 看到这个我就想到之前说河南什么样中国就什么样的那位
18:34 xxxxxxxx: 还是中国什么样河南就什么样
18:42 Mokou joined channel
18:43 Mokou: 今天居然还是元帅
18:43 Mokou: 不过掉到700+了
18:45 * varna 血战南西中
18:46 Mokou: OTL
18:46 varna: Mokou: pull一下，接口有小变化
18:46 Mokou: 了解
18:47 varna: 啊，我推送一下K
18:47 * Mokou 正跟明石修船按等级由小到大排的元帅打演习
18:49 Mokou: 共和党议员、众议院情报委员会主席 Pete Hoekstra 是 NSA 的支持者，多年来一直为大规模监视辩护。12 月 30 日，据报道 NSA 监听了美国议员和犹太组织的私下对话内容，突然之间他们开始谴责 NSA 滥用权力，失去了所有的信誉，对自己隐私被侵犯而愤愤不平，要求展开调查。
18:53 Mokou: http://ww4.sinaimg.cn/bmiddle/7cc9aaf1gw1eznekr8vaqj20hs0vk0xp.jpg
18:57 Mokou: http://ww4.sinaimg.cn/bmiddle/5dde13c4gw1eznl34iexcj20bd0ciju5.jpg “怎样攻略日本各大大学的男生。”
18:58 Mokou: 去吃饭
18:58 varna: 23333333
19:03 xxxxxxxx: 重复很多的那个是啥意思?
19:07 varna: “你好啊”
19:08 lh_mouse: ohayou
19:08 lh_mouse: 早安。
19:08 varna: 打个招呼就攻陷的立功悲剧
19:08 varna: 理工*
19:08 varna: 早安更恰当
19:25 Mokou: 不过为什么和早大撕逼的是明治……
19:25 Mokou: 庆应何在
19:26 * varna 肝脏崩溃
19:26 Mokou: OTL
19:26 varna: 去年我打南西绝对没这么困难……
19:29 xxxxxxxx: 为何打个招呼就能攻略?
19:30 Mokou: 因为理工科没妹子
19:30 xxxxxxxx: 你看羊驼也没妹子
19:30 xxxxxxxx: 但是ex如何能攻略羊驼呢
19:30 Mokou: 所以柠子当年打个招呼就攻略了
19:31 Mokou: 现在羊驼子毕竟后宫佳丽无数
19:31 xxxxxxxx: 原来如此怪不得现在ex怎么闹都没用
19:32 xxxxxxxx: 羊驼已经见得多了
19:32 iyzsong: 2333
19:32 xxxxxxxx: 身经百战了
19:33 Mokou: 所以我们才要搞个大性闻，把羊驼子批判一翻
19:33 varna: 我船位就氪到180
19:33 Mokou: 剩下的钱全部变成了戒指
19:33 xxxxxxxx: EEE比ex高不知道到哪里去了 羊驼跟她谈笑风生
19:34 varna: 噫噫噫
19:34 Mokou: 你看羊驼子现在都没钱买生发剂，只好当方丈
19:34 varna: 南西做完了，伊号80%、通商破坏50%……
19:34 * Mokou 扑通
19:34 varna: 这个惨烈程度才是正常的
19:34 varna: 去年后来都太顺了
19:35 xxxxxxxx: 伊号是打空母的那个?
19:35 varna: 对
19:35 Mokou: 羊驼子连天灵盖都快保不住了
19:35 xxxxxxxx: 这真是熟悉的南西....
19:35 varna: 糟了忘了补上阿号
19:35 varna: 今天已经杀进去十几次
19:36 varna: 哦操轮型
19:36 varna: 又要换人了
19:36 varna: 炸了一个中破，还好
19:40 varna: `http://tryperl.pl/
19:40 varna: http://tryperl.pl/
19:41 Mokou: 飞天羊驼神教
19:41 varna: http://blogs.perl.org/users/gabor_szabo/2016/01/earn-money-with-your-perl-articles.html Perlmaven招聘作者
19:42 Mokou: 你要不要去打工试试？
19:42 varna: 不去，我还需要继续学习巫术
19:42 * Mokou 不会巫术
19:43 varna: 好歹有一些perlguts程度才行
19:43 Mokou: 要不然我们搞个飞妈moose神教
19:43 varna: 飞不动，moose支持者太多了
19:43 Mokou: 所以才需要圣战
19:44 varna: 米空米空米
19:44 varna: 圣战之类的交给年轻人吧
19:44 varna: 我打扫战场就好
19:44 Mokou: 撸爷三连闪
19:46 Mokou: 我现在突然觉得东山急行其实挺好的
19:47 Mokou: 356能拆出一堆弹药
19:47 Mokou: 然后玉子烧大破了
19:48 varna: 修船修不过来，基本在亏我资源
19:48 Mokou: 我家船练度不行
19:48 varna: 比我的已经好一些了
19:48 Mokou: 轻母弱
19:48 varna: 靠舔
19:49 Mokou: 重巡我倒不担心，除了爱宕青叶其他最低都是Lv75
19:49 varna: 现在到了活动我就一个年头
19:49 varna: 念头
19:49 varna: 用支援砸
19:49 Mokou: OTL
19:49 varna: 其余的就是天命了
19:49 Mokou: 没32砸不动
19:50 varna: 今天跟糖果合计了一下，给他们那边的业务直接上openssl
19:50 varna: 我不抵抗了
19:50 Mokou: ……
19:50 varna: 协议爱怎么做怎么做，谁愿意搞中间人谁去搞
19:50 Mokou: p7 + openssl？
19:50 varna: +
19:50 varna: openssl可以不做适配直接用
19:51 varna: 不用BIO, 直接开上下文，然后绑fd
19:51 Mokou: 之前你怎么打算
19:51 varna: 之前问过他们有没有信心自己给协议加密解密
19:51 Mokou: 没有？
19:52 varna: 没有
19:52 Mokou: 23333
19:52 varna: 不过openssl要是搭配p7的话，还是需要我自己提供一个小包裹
19:53 varna: 我不太喜欢这里他们设计的接口，应该说是典型的无脑开闭坑用户
19:54 varna: 如果一个库的开闭原则仅限于对自己的功能变化进行考虑，我觉得这作者稍微短视了点
19:54 Mokou: 它会开关fd？
19:55 varna: SSL_read/write类型是int (*)(SSL *, void *, int)
19:56 varna: 嗯
19:56 Mokou: ……
19:56 Mokou: 坑
19:56 varna: 我甚至没看见const void *和size_t
19:56 varna: 且不说开闭，这原型就够陋
19:58 varna: 现在我只能祈祷那个所谓的BIO没有再插一脚
19:58 varna: 让我能够简单监听一下就行
19:58 Mokou: The behaviour of SSL_read() depends on the underlying BIO.
19:58 Mokou: 听起来坑飞了
19:59 varna: 这个没关系
19:59 varna: 他可以自己去完成IO
19:59 varna: 我只需要他不插手IO通知
19:59 varna: 这个我回去试试
20:03 Mokou: 古鹰Lv79、玉子烧Lv78
20:03 varna: OTL
20:04 Mokou: 然而乌黑浓密
20:05 * varna 已成为虚高典范
20:05 * Mokou 婚舰不到一页
20:09 varna: 今天要是阿号做完我就6了
20:09 Mokou: 了反子老，中田
20:12 varna: 进门走中不沟下……
20:12 varna: 我这是顶着80%的阿号啊
20:12 Mokou: ……
20:13 varna: 啊，门前沟
20:13 Mokou: ……
20:13 varna: 被救赎了
20:13 varna: 这次打完应该就结束了吧
20:14 varna: _(:з」∠)_结束了
20:14 Mokou: OTL
20:14 Mokou: 是在下浓密了
20:14 varna: 然后去1-6打潜艇
20:15 varna: 我驲怎么那么多大破……
20:16 Mokou: 看了一下上午巨基发的那个吹
20:16 Mokou: 我就说四个字
20:16 Mokou: 《朝日新闻》
20:17 varna: 噫，进门三个潜艇
20:17 varna: 这不好弄啊，日常反潜打几个来着，六个？
20:18 Mokou: 日常反潜没印象了……
20:18 Mokou: 六个
20:19 varna: 电酱中破了，小和放母港又容易杀生，今天就绫波值班吧
20:21 varna: 不过好歹恢复了一些元气，资源上不那么吃亏了
20:21 varna: 4-5实在太惨烈
20:21 varna: 下个月我试试3ca3cv前哨，要是还打不过就先不打
20:21 varna: 今天就因为武藏没修，日德兰输了一场
20:22 Mokou: 桶
20:23 varna: 劳苦功高，桶了太失礼
20:23 Mokou: 桶下去能爽
20:23 varna: 我派了潜艇带霞去吃经验，结果T不利伤害不足，输了
20:24 varna: 日常开发造两个主炮吧
20:24 varna: 四个有点多
20:28 hatelis joined channel
20:28 varna: 企鹅+12.7机枪
20:30 hatelis: varna, 
20:30 hatelis: 爆
20:30 hatelis: 部队
20:30 hatelis: 不对
20:30 varna: 这基佬
20:35 dantmnf joined channel
20:38 MoBot joined channel
20:38 condy: 膜一下 hatelis 
20:38 MoBot: hatelis 千万要记着，不要“见得风，是得雨”。
20:39 Mokou: 这什么鬼
20:39 condy: 0.0
20:39 hatelis: 这特么谁干的……
20:39 condy: hatelis: 渣渣干的（
20:39 hatelis: MoBot, 哪里来的膜法师！
20:39 hatelis: condy, 干的好！
20:39 hatelis: 膜一下 condy
20:39 MoBot: condy ,(๑•̀ㅂ•́)و✧我跟他谈笑风生。
20:39 varna: 噗
20:40 hatelis: 膜一下 varna
20:40 MoBot: 你姿瓷 varna 吗？当然啦！
20:40 varna: 膜一下 基本法
20:40 hatelis: 当然啦！+1
20:40 MoBot: 所以说 基本法 呀还是要prpr，识得唔识得啊？唉，我也替你们着急啊，真的。
20:40 varna: 膜一下 openssl
20:40 MoBot: Orz openssl
20:40 hatelis: 膜一下 长者
20:40 MoBot: 长者 千万要记着，不要“见得风，是得雨”。
20:40 varna: 膜一下 libcrypto
20:40 MoBot: libcrypto 千万要记着，不要“见得风，是得雨”。
20:40 Mokou: 你们看看你们
20:40 hatelis: 好了好了，不要膜了
20:40 Mokou: 都在一派胡言
20:40 varna: 这使膜不行啊
20:40 varna: 一派胡言
20:40 hatelis: 膜一下 Mokou
20:40 MoBot: Orz Mokou
20:40 hatelis: 膜一下 Mokou
20:40 MoBot: 接到这个消息，Mokou 本身也要判断，明白意思吗？
20:41 Mokou: 这个我感到非常气愤
20:41 hatelis: Mokou, 红旗和羊驼背着我搞基，完全没有良心！
20:41 varna: 赣这基佬
20:41 Mokou: hatelis: 你不要见得风，是得雨，我什么时候和羊驼子搞基了？
20:42 Mokou: i'm angry
20:43 hatelis: Mokou, 我亲眼看见你们俩开红色法拉利！
20:44 hatelis: 膜一下 condy
20:44 MoBot: 我告诉你们，我是身经百战了，见得多啦！ condy 的哪一个身体部位我没prpr过？
20:44 hatelis: 蛤蛤蛤蛤
20:44 Mokou: 你们这些人给我们频道的OP泼脏水，包括给我本人泼脏水
20:44 Mokou: 我当时就吟了两句诗：敢同恶鬼争高下，不向霸王让寸分
20:45 hatelis: 我等频道屁民，坚守着 為有犧牲多壯志 敢教日月換新天
20:45 varna: 我当时就吟了一首歌：新春之始，岸海之眺；念起梦生，子虚乌有
20:46 varna: poi apoi(const char *nptr);
20:47 Mokou: 每次我听美国人读“京都”都感觉不舒服……
20:48 hatelis: Mokou, 就是那种钦定的感觉？
20:48 Mokou: uccu
20:57 varna: 我发现我累迷糊的时候也会写一行一行的C代码
20:58 Mokou: 不迷糊的时候写一行C代码么……
20:58 varna: (), (), (), (({}), 1);
20:58 Mokou: 23333
21:03 dantmnf quit:Quit: ZNC - http://znc.in
21:03 tutu quit:Ping timeout: 255 seconds
21:14 varna: http://imgsrc.baidu.com/forum/w%3D580/sign=1218bed7b5119313c743ffb855380c10/8f4430ea15ce36d39462f3253df33a87e850b1b7.jpg
21:16 varna: 噫，远征忘发出去了
21:20 varna: 看着随便用epoll就能写出来的渣echo demo, 我开始怀疑p7有个卵意义（笑）
21:25 pocmon quit:Quit: 闪...
21:27 Mokou: http://ww2.sinaimg.cn/bmiddle/683b87c5gw1eznqtljapnj20xc7pskfw.jpg
21:27 condy: 。。。
21:29 iyzsong: o/z
21:31 varna: 看着openssl这些自作聪明的IO, 我浑身都疼
21:36 Mokou: 用MCF
21:39 lh_mouse: 0.0
21:39 dantmnf joined channel
21:41 hatelis: varna, 至少你demo，比 callback = foo, args = args 要容易看懂的多
21:42 lh_mouse: ヲ也要写个 poseidon 的 demo！
21:42 hatelis: varna, OpenSSL那个诡异的io，基本上要往epoll上套，都差不多得改源码
21:42 varna: 我就想艹他大爷
21:42 hatelis: lh_mouse, 不想写文档，就写example啊！
21:42 lh_mouse: medusa 就是 example。
21:43 varna: ok
21:43 condy: 哪有这么大的 example..
21:43 varna: 这破玩意好歹能挂到epoll上
21:43 varna: 然而有一个问题啊
21:43 varna: SSL_read SSL_write SSL_accept SSL_connect
21:43 hatelis: lh_mouse, 写个简单粗暴点的。medusa我看着都费劲儿。弄个直白些的，没设计模式的啊
21:43 varna: 这四个东西是要IO的……
21:43 xxxxxxxx quit:Quit: Leaving...
21:43 hatelis: 没那么深嵌套的设计模式的
21:43 lh_mouse: ヲ写个 echo server 好了。
21:43 varna: 我扔两个刚才弄的脑残demo
21:44 hatelis: lh_mouse, 最好是辣鸡C-Style的。少套两层class啊
21:44 varna: S https://pastebin.mozilla.org/8855757   C https://pastebin.mozilla.org/8855758
21:44 varna: 这鬼玩意儿
21:45 varna: 中间那些int不是我的锅
21:45 varna: 他给什么类型，我就用什么类型
21:45 varna: 都是时臣的错
21:45 hatelis: varna, 羊驼子这个现在好像已經快从CSP-style变成Actor-style吧，CSP哪有什么mailbox
21:45 varna: hatelis: 你终于反应过来了么……我给0.3的提交写的就是actor concurrency
21:46 sleepwalking joined channel
21:46 varna: 你翻翻提交历史能看到
21:46 varna: sleepwalking: 爆
21:46 varna: 另外其实我并没有假设风格
21:46 hatelis: varna, 不，我一直就是把它当actor在看。再说CSP也不好玩。搞来搞去还是mutex满天飞
21:46 sleepwalking: http://www.bilibili.com/html/activity-kfc.html
21:46 varna: 我只遵循学院派的CSP, 也即强调trace
21:46 sleepwalking: 帝球快教育他们吃炸鸡
21:46 varna: 我现在对FKC就一个怨念：薯条
21:47 sleepwalking: 薯条咋啦
21:47 varna: 不好吃
21:47 varna: 麦记比上校好，汉堡王完爆前面两个
21:47 sleepwalking: KFC我好久没吃过，已经忘了什么味
21:47 varna: 当然作为薯条爱好者，说不好吃也是相对的
21:48 varna: 只是觉得再进步一下就好了
21:48 varna: hatelis: 你看看那两个openSSL的悲剧demo
21:48 varna: 我只是粗糙地写了一下，不过看起来还是能勉强挂上epoll的
21:49 varna: 但SSL_accept的部分我觉得不该这么写
21:49 varna: 别当真
21:49 hatelis: 现在国内开始折腾OpenSSL的厂家逐渐多起来了，因为HTTPS需求上升，但是默认的那坨辣鸡又不好用
21:50 varna: 然而我觉得最好的方案还是灭了这狗日的玩意
21:50 varna: 什么破库……
21:50 hatelis: varna, LibreSSL呢？
21:50 varna: 他管IO么
21:50 varna: 再来几个自作聪明的悲剧玩意儿，谁也受不了
21:50 hatelis: 我也没用过，但我觉得应该是功能上兼容OpenSSL的
21:51 varna: 说什么IO透明完成，然而透明的代价就是服务器框架不可监管
21:51 varna: 这就惨
21:51 Mokou: LibreSSL is a version of the TLS/crypto stack forked from OpenSSL in 2014, with goals of modernizing the codebase, improving security, and applying best practice development processes. 
21:51 Mokou: best practice
21:51 varna: forked from OpenSSX
21:51 Mokou: 为什么这两个单词会给我一种不祥的预感
21:51 Mokou: 是
21:51 Mokou: heartbleed那次以后fork的
21:51 varna: (｡･ω･)ﾉ我TM还是先跟OpenSSL奋斗一下吧
21:52 varna: 现在看来我稍微谨慎一点的话，不那么细致的需求还可以做
21:52 hatelis: varna, 是个fork，但是代码风格稍微好些
21:52 Mokou: The openssl(1) utility, which provides tools for managing keys, certificates, etc. libcrypto: a library of cryptography fundamentals libssl: a TLS library, backwards-compatible with OpenSSL libtls: a new TLS library, designed to make it easier to write foolproof applications
21:52 varna: 代码风格好点就不行了
21:52 varna: 我不仅烦他们的码风和接口，还不喜欢他们的架子
21:52 varna: 码风和接口烂，有时候可以稍稍弥补
21:52 Mokou: 要不然你只用libcrypto？
21:53 varna: 那样我还得操心回声对策什么的，之前也不是没想过这个问题
21:53 Mokou: 也是
21:53 varna: 不过我觉得作为freelancing, 我还是用一个堂皇的借口吧
21:53 varna: 至少我说SSL的时候，可以把锅卸给时臣
21:59 cleamoon_ joined channel
22:06 varna: 其实刚才那个demo的写法应该是这样
22:06 varna: 一个SSL连接上，至少有下面几个变迁
22:06 varna: accept产生一个新fd, 给它绑好SSL信息挂上epoll, 然后就撤手
22:07 varna: 新fd对应的状态变迁上accept
22:07 varna: 然后再说其他的
22:07 varna: 不然这里有协程敢等，就有别的协程要论外
22:13 lh_mouse: hatelis, https://github.com/lhmouse/poseidon/tree/master/examples
22:14 lh_mouse: varna, 你想复杂了。
22:15 hatelis: lh_mouse, Got. gud
22:16 lh_mouse: gud 是什么。
22:16 varna: lh_mouse: 不，我这里单个的阻塞操作是不允许的
22:16 lh_mouse: 生殖器溃疡疾病（Genital Ulcer Disease）
22:16 varna: 所有可能的阻塞操作必须等通知就绪
22:16 varna: 不然就会因为阻塞而让后面的可调度协程饥饿
22:16 hatelis: lh_mouse, 故意把good打错。
22:17 lh_mouse: varna, ヲ记得你是用了 glibc 的 hook？
22:17 varna: lh_mouse: 没，我直接挂的epoll
22:17 lh_mouse: 你的 socket 是阻塞的还是非阻塞的。
22:17 varna: 都可以，但模式是按阻塞做的
22:18 varna: ONESHOT挂上epoll, 重调度
22:18 lh_mouse: ヲ问事实上是阻塞还是非阻塞。
22:18 varna: 一旦调度切回来，IO已经就绪
22:18 varna: 无所谓
22:18 varna: 我不规定这个，由用户决定
22:18 lh_mouse: 这地方 send 一下就有所谓了。
22:18 lh_mouse: recv 是无所谓的。
22:18 varna: 你可以按阻塞考虑
22:18 varna: 因为我集中解决的也是阻塞的情况
22:19 lh_mouse: ヲ的问题是，给定一个 epoll 时间，你能否追溯到这个事件对应的 session。
22:19 lh_mouse: s,时间,事件,
22:19 varna: 这甚至不是我考虑的范围……区分一下吧
22:19 varna: p7只保证任何协程的阻塞IO不会卡住其他就绪协程
22:19 varna: 没有会话，没有额外的事件搭载
22:19 varna: 如果需要组织，那是进一步的事情了
22:20 varna: 但用户态并发不是服务器框架
22:20 lh_mouse: 所以你这个地方实现 SSL 就麻烦了。
22:20 varna: 所以不作限制
22:20 Mokou: http://imgs.xkcd.com/comics/2016_conversation_guide.png
22:20 varna: 不
22:20 lh_mouse: SSL 是有状态的。
22:20 varna: 你似乎搞错了一点
22:20 hatelis: varna, 协程实现的io，block对于开发者而言，其实是不能返回-1,至少要返回一部分才行的吧
22:20 varna: T f(foobar) { ... some_io_operation(blah); ... }
22:21 hatelis: block->io操作
22:21 varna: 这里是状态机
22:21 varna: 它并不需要在乎回调框架什么的事情，因为压根没有
22:21 varna: 在进入some_io_operation的时候，它知道自己从其中返回之后，IO已经就绪
22:21 varna: 这一点由并发运行时保证
22:21 lh_mouse: varna, 你实现 SSL socket 不需要操心 send 或者 recv 这两个东西。
22:22 varna: 然而单纯的状态机，在我这里可以自由实现
22:22 varna: 刚才的说法其实也只针对demo
22:22 varna: 如果用p7 coro的话不是这样的
22:23 varna: accept出fd之后，直接顺序写SSL accept和其他业务就可以了
22:23 varna: 我只需要知道每个操作是读还是写
22:24 varna: 重申一下，这不是个需要回调的服务器框架
22:24 varna: 如果要写业务，理想的情况应该是仿佛fork-on-connection一样的
22:24 lh_mouse: 我觉得你搞错了一个东西。
22:24 varna: 搞错什么了
22:25 lh_mouse: SSL_accept 和 accept 不是同一个层次上的东西。
22:25 varna: 对
22:25 lh_mouse: SSL_accept 已经是传输层以上了，对于传输层来说这就是 I/O。
22:25 varna: 但我们先把这些事情排除掉
22:25 lh_mouse: 你不能像对待 accept 那样对待 SSL_accept。
22:25 varna: 你看
22:26 varna: 坦率地说，你说的是对的，但你混杂了你的观念
22:26 lh_mouse: ヲ实际上是在 read() 里面调用 SSL_accept() 的。
22:26 varna: 我这里不谈usage
22:26 varna: 我只说一个单进程单线程一服务的愚蠢服务器如何从头到尾把业务写一遍
22:26 varna: 否则我早就赞同你的说法了
22:27 lh_mouse: 只是实现 SSL 么？
22:27 varna: 不，只是把从TCP开始到SSL为止的流水帐写一遍
22:27 varna: 如果需要区分，那么可以继续划分
22:27 lh_mouse: 这个非常简单， accept 弄出一个 fd 来，然后初始化一个 SSL_CTX，调用 SSL_set_fd 把这个 fd 指派给该 SSL_CTX 即可。
22:28 varna: 正是如此
22:28 varna: 实际上你说的是服务器框架的正常搞法
22:28 lh_mouse: 你等一会。
22:28 lh_mouse: 这部分并没有结束。
22:28 lh_mouse: 这样弄完了实际上只有一个 SSL_CTX，真正的交换证书什么的并没有开始。
22:29 lh_mouse: 因此对每一个 EPOLLIN 还得不断调用 SSL_accept 直到返回成功。
22:29 lh_mouse: 这才算是正式初始化好了。
22:29 varna: 对，但是SSL_connect-SSL_accept就是在握手了对吧
22:29 lh_mouse: 如果是阻塞的，SSL_accept 返回就表示成功或出错了，不会半途返回的。
22:30 lh_mouse: 应该是。
22:30 varna: 现在的问题其实都不在这里：我要做的，就是把你刚才列出的步骤，顺序写一遍
22:30 varna: 因为底下管IO的部分实际上并不是针对服务器框架里如何划分传输、会话和表示来的
22:31 lh_mouse: 你要这个流程么？
22:31 varna: 不用，刚才我写过一遍了
22:31 hatelis: 羊驼子的问题，应该是没法直接io_wrap(SSL_connect(****))
22:31 hatelis: 吧
22:32 lh_mouse: 阻塞的好办，非阻塞的就不容易搞。
22:32 varna: 现在可以只说阻塞的，但SSL_connect和SSL_accept分别要做几次IO呢……
22:32 lh_mouse: 不确定的。
22:33 varna: 是的
22:33 lh_mouse: 阻塞的它是不会半途返回的，所以无脑等待即可。
22:33 varna: 麻烦就在这里
22:34 varna: 真的可以无脑等么
22:34 varna: 这里的逻辑跟我那套东西的假定有一个差别
22:34 Youmu joined channel
22:34 hatelis: 本来是该这么干的，不过羊驼子的东西没法直接让里面的多次io，都能够引发重调度
22:35 varna: 我总是假设等待IO的协程，从放弃调度的一点返回的时候，看到了完整就绪的一次IO
22:35 varna: 不管这个IO是什么
22:35 varna: 但是SSL握手并没有这么简单
22:35 hatelis: 不行的话，羊驼子可能就得学python gevent monkey,想个办法去hack那些把io隐藏在API下面的库了
22:37 varna: 这个未必hack
22:38 varna: 即使我不管底下的细节，也有比较丑的办法workaround
22:39 lh_mouse: 你怎么判断 SSL_accept 之后有没有东西可读呢？
22:40 varna: 这里我不加判断，但客户函数会在某处要求SSL_read
22:40 varna: 如果有这个要求，把它翻译到运行时的话，应当只剩下一个fd
22:40 Mokou: 睡觉
22:40 Mokou: 诸君武运
22:40 Mokou quit:Quit: 睡觉
22:42 varna: 如果这个fd在被用户所知、而被并发运行时不明细节的地方关联上SSL, 我需要确定的事情就是一个SSL操作对应一次还是多次IO
22:42 varna: 握手就比较麻烦
22:43 hatelis: lh_mouse, poseidon现在可以舒服且不用修改地直接编译运行了，赞一个
22:44 lh_mouse: hatelis, 之前要改什么？
22:45 hatelis: lh_mouse, 好久了，好象是什么boost版本的问题，我也想不起来了
22:45 lh_mouse: varna, 所以我建议把这东西封装在 read 里面。
22:45 lh_mouse: 真正的 read 分两步走。
22:46 varna: lh_mouse: 你的前提是不是执行epoll操作的代码需要明白自己在处理SSL?
22:47 lh_mouse: 执行 I/O 的函数需要知道。
22:47 lh_mouse: varna, ヲ给你段伪代码。
22:47 varna: thx
22:47 zale joined channel
22:48 zale: 朋友叫我推荐DIY配置怎么办
22:48 varna: 告诉他"DIY"
22:48 zale: 我想推荐AMD，反正就要求上网的
22:48 zale: 我怕被打死
22:49 varna: DIY什么意思大家都懂的……
22:50 zale: 你说好不好
22:50 zale: 给他推荐AMD的U
22:51 varna: 我当然不知道好不好
22:51 cleamoon_: 你说DIY，他回答亚拉那一卡
22:51 zale: ？？
22:52 zale: varna， 我就怕出问题了赖我😂
22:53 varna: lh_mouse: 或者我用非阻塞的，强行吃错误码，每次都调整epoll集合里的状态呢
22:54 lh_mouse: varna, http://paste.ubuntu.com/14400131/
22:54 lh_mouse: varna, ヲ是用非阻塞的。
22:54 varna: ok, 我把整个整理下来
22:55 varna: 这*
22:55 varna: 再决定自己怎么弄
22:55 varna: 提供建议十分感谢
22:55 lh_mouse: 你用这个替代掉原本处理 EPOLLIN 的地方就行了。
22:55 varna: 明天不懂了再问你
22:56 lh_mouse: SSL_accept 可能进行了 I/O 但是外面完全看不出来。
22:56 varna: +
22:56 lh_mouse: /w\
22:56 varna: 先撤
22:56 varna: 武运
22:56 varna quit:Quit: leaving
22:56 lh_mouse: 没人蜡。
22:57 hatelis: = =
22:58 hatelis: 话说send(std::move(buffer))为啥去掉std::move也能编译通过
22:58 hatelis: 或者应该这么说，怎么样能让没有std::move()的buffer没法编译通过
22:58 zale quit:Remote host closed the connection
23:26 hatelis quit:Quit: Leaving
23:36 ASenR quit:Ping timeout: 246 seconds
